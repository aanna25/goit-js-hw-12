{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from \"axios\";\n\nconst API_BASE_URL = \"https://pixabay.com/api/\";\n\nconst API_KEY = \"50191588-7d0b750c5d17d1451aa626dbf\";\n\nexport async function getImagesByQuery(query, page = 1) {\n    try {\n      const response = await axios.get(API_BASE_URL, {\n        params: {\n          key: API_KEY,\n          q: query,\n          image_type: \"photo\",\n          orientation: \"horizontal\",\n          safesearch: true,\n          page,\n          per_page: 15,\n        },\n      });\n      return response.data;\n    } catch (error) {\n      throw new Error(`Failed to fetch images: ${error.message}`);\n    }\n  }","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\nexport function createGallery(images) {\n    const gallery = document.querySelector(\".gallery\");\n    const markup = images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" />\n          </a>\n          <div class=\"info\">\n            <p><b>Likes:</b> ${likes}</p>\n            <p><b>Views:</b> ${views}</p>\n            <p><b>Comments:</b> ${comments}</p>\n            <p><b>Downloads:</b> ${downloads}</p>\n          </div>\n        </li>\n      `\n    )\n    .join(\"\");\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    const gallery = document.querySelector(\".gallery\");\n    gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    const loader = document.querySelector(\".loader\");\n    loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n    const loader = document.querySelector(\".loader\");\n    loader.classList.add(\"hidden\");\n}\n  \nexport function showLoadMoreButton() {\n  const loadMoreButton = document.querySelector(\".load-more\");\n  loadMoreButton.classList.remove(\"hidden\");\n}\n\nexport function hideLoadMoreButton() {\n  const loadMoreButton = document.querySelector(\".load-more\");\n  loadMoreButton.classList.add(\"hidden\");\n}","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions.js\";\n\nconst form = document.querySelector(\".form\");\nconst input = form.querySelector(\"[name='search-text']\");\nconst loadMoreButton = document.querySelector(\".load-more\");\n\nlet currentQuery = \"\";\nlet currentPage = 1;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", handleSubmit);\n\nloadMoreButton.addEventListener(\"click\", handleLoadMore);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  const query = input.value.trim();\n\n  if (!query) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"Please enter a search query\",\n      position: \"topRight\",\n    });\n    return;\n  }\n\n  currentQuery = query;\n  currentPage = 1;\n  totalHits = 0;\n\n  hideLoadMoreButton();\n  showLoader();\n  clearGallery();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: \"No Results\",\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        position: \"topRight\",\n      });\n    } else {\n      createGallery(data.hits);\n\n      if (data.hits.length < 15 || currentPage * 15 >= totalHits) {\n        hideLoadMoreButton();\n        if (currentPage * 15 >= totalHits) {\n          iziToast.info({\n            title: \"End of Results\",\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: \"topRight\",\n          });\n        }\n      } else {\n        showLoadMoreButton();\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"Something went wrong. Please try again later.\",\n      position: \"topRight\",\n    });\n  } finally {\n    hideLoader();\n    form.reset();\n  }\n}\n\nasync function handleLoadMore() {\n  currentPage += 1;\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n    createGallery(data.hits);\n\n    const galleryItem = document.querySelector(\".gallery-item\");\n    if (galleryItem) {\n      const { height } = galleryItem.getBoundingClientRect();\n      window.scrollBy({\n        top: height * 2,\n        behavior: \"smooth\",\n      });\n    }\n\n    if (data.hits.length < 15 || currentPage * 15 >= totalHits) {\n      hideLoadMoreButton();\n      if (currentPage * 15 >= totalHits) {\n        iziToast.info({\n          title: \"End of Results\",\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: \"topRight\",\n        });\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"Something went wrong. Please try again later.\",\n      position: \"topRight\",\n    });\n  } finally {\n    hideLoader();\n  }\n}"],"names":["API_BASE_URL","API_KEY","getImagesByQuery","query","page","axios","error","lightbox","SimpleLightbox","createGallery","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","loadMoreButton","currentQuery","currentPage","totalHits","handleSubmit","handleLoadMore","event","iziToast","data","galleryItem","height"],"mappings":"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"}